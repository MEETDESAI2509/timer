<!DOCTYPE html>
<html>
<head>
  <title>Auction Timer</title>
  <script>
    function startCountdown(createdAt) {
      const countdownDuration = 30; // 10 seconds
      const createdAtDate = new Date(createdAt);
      const countdownElement = document.getElementById('countdown');
      
      function updateCountdown() {
        const now = new Date();
        const elapsedSeconds = (now - createdAtDate) / 1000;
        const remainingSeconds = Math.max(0, countdownDuration - elapsedSeconds);
        
        countdownElement.textContent = remainingSeconds.toFixed(0);
        
        if (remainingSeconds > 0) {
          setTimeout(updateCountdown, 1000);
        } else {
          countdownElement.textContent = "Time's up!";
        }
      }

      updateCountdown();
    }

    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    window.onload = function() {
      const createdAt = getQueryParam('created_at');
      //const createdAt = 'Mon, 05 Aug 2024 07:45:25 GMT'
      if (createdAt) {
        startCountdown(createdAt);
      } else {
        document.getElementById('countdown').textContent = "No timestamp provided.";
      }
    };
  </script>
</head>
<body>
  <div>
    Time remaining: <span id="countdown"></span> seconds
  </div>
</body>
</html>
